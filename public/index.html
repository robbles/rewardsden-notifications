<!doctype html>
<html>
<head>
    <title>Notifications Testing</title>
</head>
<body>
<script src="/jquery.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script>
    var url = window.location.href;
    console.log('connecting to ' + url);
    var socket = io.connect(url);
    socket.on('ping', function (data) {
        console.log('Received a ping:');
        console.log(arguments);
    });
    socket.on('notification', function (data) {
        console.log('Received a notification:');
        console.log(data);
        $('#messages').append(JSON.stringify(data) + '\n');
    });
    socket.on('connect', function () {
        console.log('connected!');
    });
    socket.on('disconnect', function () {
        console.log('disconnected!');
    });
    $(function() {
        $('#register').click(function() {
            var id = $('#id').val();
            console.log('Registering as user ' + id);
            socket.emit('register', {id: id});
        });
    });
</script>
<input type="text" id="id" placeholder="User ID"/>
<button type="submit" id="register">Register</button>
<pre id="messages"></pre>
</body>
</html>
