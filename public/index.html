<!doctype html>
<html>
<head>
    <title>Notifications Testing</title>
    <style>
        .notification {
            color: black;
        }
        .admin-update {
            color: grey;
        }
    </style>
</head>
<body>
<script src="/jquery.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script>
    var url = window.location.href;
    console.log('connecting to ' + url);
    var socket = io.connect(url);
    socket.on('ping', function (data) {
        console.log('Received a ping:');
        console.log(arguments);
    });
    socket.on('rd-notify', function (data) {
        console.log('Received a notification:');
        console.log(data);
        $('#messages').append('<p class="notification">' + JSON.stringify(data) + '</p>');
    });
    socket.on('rd-adminUpdate', function (data) {
        console.log('Received a admin update:');
        console.log(data);
        $('#messages').append('<p class="admin-update">' + JSON.stringify(data) + '</p>');
    });
    socket.on('connect', function () {
        console.log('connected!');
    });
    socket.on('disconnect', function () {
        console.log('disconnected!');
    });
    $(function() {
        $('#register').click(function() {
            var id = $('#id').val();
            console.log('Registering as user ' + id);
            socket.emit('rd-storeClientInfo', {ruserId: id});
        });
    });
</script>
<input type="text" id="id" placeholder="User ID"/>
<button type="submit" id="register">Register</button>
<div id="messages"></div>
</body>
</html>
